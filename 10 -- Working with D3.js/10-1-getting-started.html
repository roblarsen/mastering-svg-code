<!doctype html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <title>Mastering SVG- D3 Chord Diagram</title>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm"
        crossorigin="anonymous">
    <link href="https://fonts.googleapis.com/css?family=Raleway" rel="stylesheet">
</head>

<body>
    <div class="container">
        <div class="row">
            <div class="col-12" id="target">

            </div>
        </div>
    </div>


    <script src="node_modules/d3/dist/d3.min.js"></script>
    <script src="node_modules/d3-fetch/dist/d3-fetch.min.js"></script>
    
    <script>

        let width = 1000,
            height = 1000,
            radius = Math.min(width, height) / 2;

        let color = d3.scaleOrdinal()
            .domain(d3.range(9))
            .range([
                "002244",
                "183858",
                "304F6D",
                "496582",
                "617C97",
                "7992AB",
                "92A9C0",
                "AABFD5",
                "C2D6EA",
                "DBEDFF"
            ]);

        let arc = d3.arc()
            .outerRadius(radius - 10)
            .innerRadius(radius - 200);

        let pie = d3.pie()
            .sort(null)
            .value(function (d) { return d.occurances; });

        let svg = d3.select("#target").append("svg")
            .attr("width", width)
            .attr("height", height)
            .append("g")
            .attr("transform", "translate(" + width / 2 + "," + height / 2 + ")");

        d3.csv("data.csv").then((data)=> {
            let g = svg.selectAll(".arc")
                .data(pie(data))
                .enter().append("g")
                .attr("class", "arc");

            g.append("path")
                .attr("d", arc)
                .style("fill", function (d) { return color(d.data.title); });

            g.append("text")
                .attr("transform", function (d) { 
                    return "translate(" + arc.centroid(d) + ")"; })
                .attr("dx", "-3em")
                .text(function (d) { return d.data.title; });
        });


    </script>

</body>

</html>